# 奶茶店订单制作与原料库存管理系统开发文档

## 1. 项目简介

本项目是基于MTOI(RuoYi)快速开发框架构建的奶茶店订单制作与原料库存管理系统，结合大模型技术，实现奶茶店业务流程的数字化和智能化管理。系统采用前后端分离架构，后端基于Spring Boot，前端基于Vue.js，通过大模型技术提供智能推荐、客服和预测等功能。

## 2. 技术架构

### 2.1 后端技术栈
- **核心框架**：Spring Boot 2.5.x + MyBatis
- **安全框架**：Spring Security + JWT
- **数据库**：MySQL 8.0
- **缓存**：Redis
- **接口文档**：Swagger 3.0
- **日志管理**：Logback
- **定时任务**：Quartz
- **代码生成**：MTOI代码生成器

### 2.2 前端技术栈
- **核心框架**：Vue 2.6.x
- **路由**：Vue Router
- **状态管理**：Vuex
- **UI框架**：Element UI
- **HTTP客户端**：Axios
- **工具库**：Lodash、Moment.js等

### 2.3 大模型集成
- **AI平台**：DeepSeek API
- **应用场景**：智能推荐、客服对话、销售预测

## 3. 项目结构

```
MTOI/
├── ruoyi-admin/           # 后端主应用
├── ruoyi-common/          # 通用模块
├── ruoyi-framework/       # 框架核心
├── ruoyi-generator/       # 代码生成器
├── ruoyi-quartz/          # 定时任务
├── ruoyi-system/          # 系统模块
├── ruoyi-ui/              # 前端UI
├── sql/                   # 数据库脚本
└── 相关文档/              # 项目文档
```

### 3.1 后端结构说明

#### ruoyi-admin/
- 项目启动类和配置文件
- 全局异常处理
- 系统入口控制

#### ruoyi-common/
- 通用工具类
- 枚举类型定义
- 异常处理类
- 注解定义

#### ruoyi-framework/
- 权限认证模块
- 数据源配置
- 日志切面
- 安全配置

#### ruoyi-system/
- 系统管理业务实现
- 用户、角色、菜单等核心功能
- 业务数据访问层

### 3.2 前端结构说明

#### ruoyi-ui/
- **api/**：接口调用封装
- **assets/**：静态资源文件
- **components/**：通用组件
- **router/**：路由配置
- **store/**：状态管理
- **utils/**：工具方法
- **views/**：页面组件

## 4. 核心功能模块

### 4.1 系统管理模块
- 用户管理：用户增删改查、密码重置等
- 角色管理：角色权限分配
- 菜单管理：动态菜单配置
- 部门管理：组织架构维护
- 字典管理：数据字典维护
- 参数配置：系统参数设置
- 通知公告：系统消息发布
- 日志管理：操作日志查看

### 4.2 订单管理模块
- 订单创建：支持堂食、外卖、自提等类型
- 订单处理：订单状态流转管理
- 订单查询：多条件筛选查询
- 订单统计：销售数据统计分析

### 4.3 原料库存模块
- 原料信息：原料基础信息维护
- 库存监控：实时库存查看
- 入库管理：采购入库、其他入库
- 出库管理：生产领用、其他出库
- 库存盘点：定期盘点功能
- 库存预警：低库存提醒

### 4.4 大模型应用模块
- 智能推荐：基于用户偏好推荐饮品
- 智能客服：自然语言处理客服
- 需求预测：基于历史数据预测销售趋势

### 4.5 报表分析模块
- 销售报表：日、周、月、年报表
- 库存报表：库存状态、变动报表
- 成本报表：原料成本、利润分析

## 5. 数据库设计

系统数据库采用MySQL 8.0，主要包含以下核心表：

### 5.1 系统管理相关表
- sys_user：用户表
- sys_role：角色表
- sys_menu：菜单表
- sys_dept：部门表
- sys_dict_data：字典数据表

### 5.2 业务相关表
- product_info：产品信息表
- product_formula：产品配方表
- material_info：原料信息表
- stock_info：库存信息表
- stock_record：库存记录表
- order_main：订单主表
- order_detail：订单明细表

详细数据库设计请参考《4.数据库设计文档.md》

## 6. 开发环境搭建

### 6.1 后端环境
1. **JDK版本**：Java 8 或以上
2. **开发工具**：IntelliJ IDEA
3. **数据库**：MySQL 8.0
4. **缓存**：Redis 5.0 或以上
5. **构建工具**：Maven 3.6 或以上

### 6.2 前端环境
1. **Node.js**：12.x 或以上
2. **包管理器**：npm 或 yarn
3. **开发工具**：Visual Studio Code
4. **构建工具**：Webpack

### 6.3 环境配置步骤
1. 安装JDK并配置环境变量
2. 安装Node.js
3. 安装MySQL并导入sql脚本
4. 安装Redis
5. 导入项目到IDEA
6. 修改配置文件中的数据库连接信息
7. 启动后端服务
8. 安装前端依赖并启动前端服务

## 7. 代码规范

### 7.1 后端代码规范
- 遵循阿里巴巴Java开发手册
- 使用统一的异常处理机制
- 控制器层负责参数校验和请求转发
- 服务层处理业务逻辑
- 数据访问层只负责数据操作
- 使用统一的响应格式[R]

### 7.2 前端代码规范
- 遵循Vue官方编码规范
- 组件命名使用大驼峰命名法
- 变量命名使用小驼峰命名法
- CSS类名使用短横线分隔命名
- 使用ESLint进行代码检查

## 8. 部署说明

### 8.1 后端部署
1. 使用Maven打包：`mvn clean package`
2. 将生成的jar包上传到服务器
3. 运行命令：`java -jar ruoyi-admin.jar`

### 8.2 前端部署
1. 构建生产环境代码：`npm run build:prod`
2. 将dist目录下的文件部署到Nginx服务器

### 8.3 Nginx配置示例
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        root /path/to/dist;
        try_files $uri $uri/ /index.html;
    }
    
    location /prod-api/ {
        proxy_pass http://localhost:8080/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
```

## 9. 大模型集成

### 9.1 集成方式
通过调用外部API方式集成DeepSeek大模型服务，避免在本地部署大模型带来的资源消耗。

### 9.2 主要应用场景
1. **智能推荐**：根据用户历史订单和偏好推荐饮品
2. **智能客服**：处理常见订单咨询和问题
3. **需求预测**：预测未来销售趋势和原料需求

### 9.3 配置说明
在application.yml中配置API密钥和接口地址：
```yaml
ai:
  deepseek:
    api-key: your-api-key
    base-url: https://api.deepseek.com
```

## 10. 常见问题解决

### 10.1 后端启动问题
- 检查数据库连接配置是否正确
- 确认Redis服务是否正常启动
- 检查端口是否被占用

### 10.2 前端启动问题
- 确认Node.js版本是否符合要求
- 检查依赖包是否安装完整
- 确认API接口地址配置是否正确

### 10.3 权限问题
- 检查用户角色权限配置
- 确认菜单权限标识是否正确
- 查看接口权限注解是否添加

## 11. 系统维护

### 11.1 日常维护
- 定期备份数据库
- 监控系统运行状态
- 检查日志文件，及时发现和处理异常

### 11.2 性能优化
- 定期清理无用的日志和缓存数据
- 优化数据库查询语句
- 对热点数据进行缓存

### 11.3 安全维护
- 定期更新系统补丁
- 更换系统密钥和密码
- 监控异常登录行为

## 12. 版本更新记录

### v1.0.0 (2025-xx-xx)
- 完成系统基础框架搭建
- 实现订单管理功能
- 实现原料库存管理功能
- 集成大模型智能推荐功能
- 完成系统部署文档

---

*本文档根据项目实际开发情况编写，如有更新请及时查阅最新版本。*